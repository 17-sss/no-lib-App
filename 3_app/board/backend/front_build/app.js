(()=>{"use strict";const t={NOT_FOUND_TARGET:"지정하려는 타켓을 찾을 수 없습니다.",NOT_FOUND_ROUTER_INFO:"페이지 정보를 담고 있는 RouterInfo를 불러올 수 없습니다.",RESPONSE_IS_NULL:"서버에서 요청에 대한 응답 값을 가져올 수 없습니다."};class e extends Error{constructor({msgType:e,customMessage:s="",name:n=""}){super(`${n&&`[${n}] `}${s||e&&`${t[e]}`||""}`)}}const s=e,n=class{constructor(t,e){this.setStateCallback=e,this._notExec=!1,this._recentChangedKeys={prevKeys:[],currKeys:[],largeKeySet:new Set},this._observers=new Set,this._state=t,this._prevState=t}get state(){return this._state}get recentChangedKeys(){return this._recentChangedKeys}set state(t){this._state=Object.assign({},t),this.setStateCallback&&this.setStateCallback(),this.updateRecentChangedKeys(),this._notExec?this._notExec=!1:this.exec()}setState(t,e){e&&void 0!==e.notExec&&(this._notExec=e.notExec),this._prevState=Object.assign({},this._state),this.state=Object.assign(Object.assign({},this._state),t)}exec(){this._observers.forEach((t=>t()))}add(t){this._observers.add(t)}remove(t){this._observers.delete(t)}clear(){this._observers.clear()}clearLargeKeySet(){this._recentChangedKeys.largeKeySet.clear()}updateRecentChangedKeys(){var t;Object.values(this._recentChangedKeys).every((t=>!t.length))||(this._recentChangedKeys.prevKeys=[...this._recentChangedKeys.currKeys]),this._recentChangedKeys.currKeys=null!==(t=this.getRecentKeys())&&void 0!==t?t:[];const{largeKeySet:e,currKeys:s}=this._recentChangedKeys;[...e,...s].forEach((t=>this._recentChangedKeys.largeKeySet.add(t)))}getRecentKeys(){if(!this._state||!this._prevState)return null;const t=Object.entries(this._state),e=Object.entries(this._prevState),s=[];for(let n=0;n<t.length;n++){const[a,i]=t[n],[o,r]=e[n];a===o&&JSON.stringify(i)!==JSON.stringify(r)&&s.push(a)}return s}};function a(t){const e=(t=>localStorage.getItem(t))(t);return e?JSON.parse(e):null}function i(t,e){return((t,e)=>localStorage.setItem(t,e))(t,JSON.stringify(e))}var o,r=function(t,e,s,n){return new(s||(s=Promise))((function(a,i){function o(t){try{c(n.next(t))}catch(t){i(t)}}function r(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}c((n=n.apply(t,e||[])).next())}))};function c({type:t,options:e}={type:"getPost"}){return r(this,void 0,void 0,(function*(){try{const s=((t,e)=>{const s="http://localhost:4000/api",n="getPost"===t?"post":t;return void 0!==e&&"getPost"===t?`${s}/${n}/${e}`:`${s}/${n}`})(t,null==e?void 0:e.id),n=yield fetch(s,e);if(!(200<=n.status&&n.status<400))throw new Error(`[!] API : status - ${n.status}`);return yield n.json()}catch(t){return console.error(t.message),null}}))}function l(t){return r(this,void 0,void 0,(function*(){try{const e=yield c();if(!e||!e.data)throw new s({msgType:"RESPONSE_IS_NULL",customMessage:t});const{data:n}=e;return n.forEach(((t,e)=>{const{createdDate:s}=t;s&&"string"==typeof s&&(n[e].createdDate=new Date(s))})),n.sort(((t,e)=>t.id&&e.id?e.id-t.id:0)),{data:n}}catch(t){const{message:e}=t;return console.error(t),{message:e}}}))}const d={postData:[],editId:-1,isInit:!1,isRefresh:!1,filterOptions:{author:"",searchWord:"",isDesc:void 0,numPost:5,pageNum:1},numPostList:[5,10,20,30,50,100]},u="board_main",h=new n(null!==(o=function(){const t=a(u);return t?(t.postData.forEach(((e,s)=>{const{createdDate:n}=e;n&&"string"==typeof n&&(t.postData[s].createdDate=new Date(n))})),t):null}())&&void 0!==o?o:Object.assign({},d),(()=>i(u,h.state)));function p({filterOptions:t,postData:e,isFullData:s}){const{author:n,isDesc:a,numPost:i,pageNum:o,searchWord:r}=t,c=function(...t){return e=>t.reduce(((t,e)=>e(t)),e)}(function(t){return e=>t?e.filter((e=>e.author===t)):e}(n),function(t){return e=>{if(!t)return e;const s=t.replace(/\s+/g,"");return e.filter((({subject:t})=>{if(null!==t)return t.replace(/\s+/g,"").indexOf(s)>-1}))}}(r),function(t){return e=>void 0===t?e:[...e].sort(((e,s)=>null===e.createdDate||null===s.createdDate?0:t?s.createdDate.valueOf()-e.createdDate.valueOf():e.createdDate.valueOf()-s.createdDate.valueOf()))}(a),function(t,e,s){return n=>{if(s)return n;const a=Math.ceil(n.length/t);e>a&&(e=a);const i=(e-1)*t,o=e*t;return n.slice(i,o)}}(i,o,s))(e);return c}var g;const f={editData:{id:null,subject:null,author:null,createdDate:null,contents:null},isEdited:!1},m="board_edit";const b=new n(null!==(g=function(){if(function(){const{pathname:t}=new URL(window.location.href),e=a(m),s=null==e?void 0:e.editId,n=!s||s===d.editId||"/edit"!==t;return n&&localStorage.removeItem("board_edit"),n}())return null;const t=a(m);if(!t)return null;const{createdDate:e}=t.editData;return"string"==typeof e&&(t.editData.createdDate=new Date(e)),t}())&&void 0!==g?g:Object.assign({},f),(()=>i(m,b.state))),v=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;function O(t){return Array.from(t.childNodes)}function S(t,e,s,n){const a=Math.max(e.length,s.length);let i=0;for(n&&(s=function(t,e){const s=[...t];return e.forEach((e=>{const n=t.findIndex((t=>{const s=e.nodeName===t.nodeName,n=t instanceof HTMLElement&&e instanceof HTMLElement;if(!n)return;const a=t.dataset.componentId,i=e.dataset.componentId;return s&&n&&a===i}));-1!==n&&(s[n]=e)})),s}(e,s));a>i;){const n=e[i],a=s[i];if(y(t,n,a)){i++;continue}E(n,a);const o=O(n),r=O(a);(o.length||r.length)&&S(n,o,r),i++}}function y(t,e,s){const n=e&&!s,a=!e&&s;if(n?t.removeChild(e):a&&t.appendChild(s),n||a)return!0;const i=e.nodeName!==s.nodeName,o=[e,s].every((t=>t instanceof Text))&&e.nodeValue!==s.nodeValue;return i?t.replaceChild(s,e):o&&(e.nodeValue=s.nodeValue),!(!i&&!o)}function E(t,e){if(!(t instanceof Element&&e instanceof Element))return;const s=Array.from(e.attributes),n=Array.from(t.attributes);s.forEach((({name:e,value:s})=>{var a;return null!==(a=n.find((({name:t,value:n})=>e===t&&s===n)))&&void 0!==a?a:t.setAttribute(e,s)})),n.forEach((({name:e})=>{var n;return null!==(n=s.find((({name:t})=>t===e)))&&void 0!==n?n:t.removeAttribute(e)}))}const j=["isNotKeepAdding","initInsertPosition"],C=class{constructor(t,e={}){this.$target=t,this.props=e,this._renderState="adding",this.componentId=function(t=16){const[e,s]=["a".charCodeAt(0),"z".charCodeAt(0)];let n="";for(;n.length<t;)n+=Boolean(Math.round(Math.random()))?v(0,9):String.fromCharCode(v(e,s));return`__${n}`}();try{if("string"==typeof t&&(this.$target=document.querySelector(t)),null===this.$target)throw new s({msgType:"NOT_FOUND_TARGET",name:this.constructor.name});this.init(),this.initSubscriber(),this.render()}catch(t){console.error(t)}}init(){}initSubscriber(){}registerSubscriberFunction(t,e){this._subscriber||(this._subscriber=new class{constructor(t){this.func=t}registerFunc(t){this.func&&t.add(this.func)}removeFunc(t){this.func&&t.remove(this.func)}}),this._subscriber.func=e,this._subscriber.registerFunc(t)}setState(t,e){var s;this._state=Object.assign(Object.assign({},this._state),t),(null==e?void 0:e.noRender)||this.render(null===(s=null==e?void 0:e.isSetEvents)||void 0===s||s)}get state(){return this._state}setBeforeRender(){}render(t=!0){const{$target:e,props:s}=this;if(null===e||"string"==typeof e)return;this.setBeforeRender();const{isNotKeepAdding:n,initInsertPosition:a}=s;n&&(this._renderState="disabled");const{_renderState:i}=this;if("adding"===i){const t=null!=a?a:"beforeend";e.insertAdjacentHTML(t,this.setTemplate()),this._renderState="done"}else this.updateComponentNodes(e,"done"===i);this.setChildren(),t&&this.setEvents()}updateComponentNodes(t,e){S(t,O(t),function(t){const e=document.createElement("div");return e.innerHTML=t,Array.from(e.childNodes)}(this.setTemplate()),e)}setTemplate(){return""}setChildren(){}setEvents(){}getEventTarget(){let t=null;const{$target:e,componentId:s}=this;return t=s?document.querySelector(`[data-component-id=${s}]`):"string"==typeof e?document.querySelector(e):e,t}createStringAttribute(...t){const e=[...j,...t];return Object.entries(this.props).reduce(((t,[s,n])=>e.includes(s)?t:t+=`${s}="${n}" `),"")}},_=class extends C{constructor(t,e){super(t,e),this.$target=t,this.props=e}setTemplate(){const{componentId:t,props:e}=this,{arrPostData:s}=e,n=(null==s?void 0:s.length)?Object.keys(s[0]):[],a=this.createTDStrings(s);return`<table class="app-board" data-component-id=${t}>\n    <thead>\n      <tr>\n      ${[["번호",15],["제목",55],["작성자",15],["작성일",15]].map((([t,e],s)=>`<th style=width:${e}%; ${n[s]?`class=${n[s]}`:""}>${t}</th>`)).join("")}\n      </tr>\n    </thead>\n      ${a.length?`<tbody>${a.map((t=>`${t}`)).join("")}</tbody>`:""}\n    </table>\n    `}setChildren(){const{props:{arrPostData:t}}=this,e=V();t.forEach((({id:t,subject:s})=>{const n=document.querySelector(`tr[data-id="${t}"] td.subject`);n&&new X(n,{href:`/detail?id=${t}`,text:null!=s?s:"제목 없음",routerInfo:e,publisherList:[h,b]})}))}createTDStrings(t){const e=[];return t.length?(t.forEach((t=>{const{id:s}=t,n=Object.entries(t).reduce(((t,[e,s])=>{if("contents"===e)return t;const n="subject"!==e;return s=s instanceof Date?s.toLocaleDateString():s,t+`<td class=${e}>${n?s:""}</td>`}),"");e.push(`<tr data-id=${s}>${n}</tr>`)})),e):[]}},x=class extends C{constructor(t,e){super(t,e),this.$target=t,this.props=e}setTemplate(){const{componentId:t,props:e}=this,{color:s,size:n}=e;return`<button class="app-button ${s?`color--${s}`:"color--normal"} ${n?`size--${n}`:"size--small"}"\n      ${this.createStringAttribute("text","color","size")} data-component-id=${t}>\n      ${e.text}</button>`}},w=class extends C{constructor(t,e){super(t,e),this.$target=t,this.props=e}setTemplate(){const{componentId:t}=this;return`<input class="app-input" ${this.createStringAttribute()} data-component-id=${t}></input>`}},$=class extends C{constructor(t,e){super(t,e),this.$target=t,this.props=e}setTemplate(){const{componentId:t}=this;return`\n    <div class="app-pagination" data-component-id=${t}>\n      <ul class="list">\n        ${this.createLiItemStrings().join("")}\n      </ul>\n    </div>\n    `}createLiItemStrings(){let{pageNum:t,max:e}=this.props;t>e&&1!==t&&(t=e);const s=t%5==0?5:t%5,n=t-s,a=t+(5-s),i=[];let o=n;for(;o<a&&!(o+1>e);){const e=o+1===t?'class="current"':"";i.push(`<li ${e}>${o+1}</li>`),o++}const r=`<li class="next${e===o?" disabled":""}">&rarr;</li>`;return[`<li class="prev${0===n?" disabled":""}">&larr;</li>`,...i,r]}},T=class extends C{constructor(t,e){super(t,e),this.$target=t,this.props=e}setTemplate(){const{componentId:t,props:e}=this,{numPostList:s,selectedValue:n}=e;return s.length?`\n    <select class="app-selectbox" data-component-id=${t}>\n      ${s.map((t=>`<option value=${t} ${n===t?"selected":""}>${t}</option>`)).join("")}\n    </select>\n    `:""}},D=class extends C{constructor(t,e){super(t,e),this.$target=t,this.props=e}setTemplate(){const{componentId:t,props:e}=this,{text:s,isBold:n}=e;let a=e.fontSize;return a&&(a<10?a=10:a>50&&(a=50)),`<span class="app-span ${a?`fontSize--${a}`:""} ${n?"bold":""}" data-component-id=${t}>${s}</span>`}},I=class extends C{constructor(t,e){super(t,e),this.$target=t,this.props=e}setTemplate(){const{componentId:t,props:e}=this,{value:s,isFullSize:n}=e;return`<textarea class="app-textarea ${n?"fullsize":""}"  ${this.createStringAttribute("value","isFullSize")} data-component-id=${t}>${s||""}</textarea>`}};const L=class extends C{setTemplate(){const{componentId:t}=this;return`<div class="detail__page--bottombar" data-component-id=${t}></div>`}setChildren(){const{props:t}=this,e={isButton:!0,routerInfo:V(),publisherList:[h,b]},s=t.dataId?+t.dataId:-1;new X(".detail__page--bottombar",Object.assign(Object.assign({},e),{href:"/edit",text:"수정",callbackOption:{func:()=>h.setState(Object.assign(Object.assign({},h.state),{editId:s})),runPosition:"afterRenderPath"}})),new x(".detail__page--bottombar",{name:"delete",text:"삭제"}),new X(".detail__page--bottombar",Object.assign(Object.assign({},e),{href:"/",text:"목록"})),this.setDetailBottomModal()}setEvents(){this.registerDetailBottomBarClick()}setDetailBottomModal(){if(!this.state||!this.state.errMessage&&!this.state.deleteStatus)return;const t=this.createDeleteModalProps(),{errMessage:e}=this.state;e&&(t.noticeText=e,t.clickHandler.handleConfirmClick=()=>{this.setState(Object.assign(Object.assign({},this.state),{errMessage:void 0}),{isSetEvents:!1}),G({href:"/",componentInfo:{Component:z}})}),new U(".detail__page--bottombar",Object.assign(Object.assign({},t),{showButtons:e?"CONFIRM":"ALL",buttonTexts:e?{confirm:"목록으로"}:void 0}))}createDeleteModalProps(){const t=()=>this.setState(Object.assign(Object.assign({},this.state),{deleteStatus:void 0}),{isSetEvents:!1});return{noticeText:"정말 삭제하시겠습니까?",clickHandler:{handleCancelClick:t,handleConfirmClick:()=>{t(),this.requestDeleteData()}}}}registerDetailBottomBarClick(){var t;null===(t=this.getEventTarget())||void 0===t||t.addEventListener("click",(t=>this.handleDetailBottomBarClick(t)))}handleDetailBottomBarClick(t){const e=t.target;e.classList.contains("app-button")&&e instanceof HTMLButtonElement&&"delete"===e.name&&this.setState(Object.assign(Object.assign({},this.state),{deleteStatus:!0}),{isSetEvents:!1})}requestDeleteData(){return t=this,e=void 0,a=function*(){try{const{dataId:t}=this.props,e={method:"DELETE",body:JSON.stringify({id:t}),headers:{"Content-Type":"application/json"}},n=yield c({type:"delete",options:e});if(!n)throw new s({msgType:"RESPONSE_IS_NULL",name:"DetailPage, DELETE"});const{message:a,statusCode:i}=n;if(!(i>=200&&i<400))throw new s({customMessage:a,name:"DetailPage, DELETE"});b.setState(Object.assign(Object.assign({},b.state),{isEdited:!0})),G({href:"/",componentInfo:{Component:z}})}catch(t){const{message:e}=t;console.error(t),this.setState(Object.assign(Object.assign({},this.state),{errMessage:e}),{isSetEvents:!1})}},new((n=void 0)||(n=Promise))((function(s,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function r(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,r)}c((a=a.apply(t,e||[])).next())}));var t,e,n,a}},N={id:"번호",subject:"제목",author:"작성자",createdDate:"작성일",contents:"내용"},k=["author","contents","subject"];const P=class extends C{init(){const{dataId:t}=this.props;this.setState(Object.assign(Object.assign({},this.state),{currData:null})),t&&this.setPostData(+t)}setTemplate(){var t;const{componentId:e}=this,{textInfoStrings:s,contents:n}=this.createPostDataStrings(null===(t=this.state)||void 0===t?void 0:t.currData);return`\n    <div class="detail__page--content" data-component-id=${e}>\n      <ul class="textinfo">${s}</ul>\n      <div class="contents">${n}</div>\n    </div>`}setChildren(){if(this.state&&this.state.errMessage){const{errMessage:t}=this.state;new U(".detail__page--content",{noticeText:t,buttonTexts:{confirm:"목록으로"},clickHandler:{handleConfirmClick:()=>{this.setState(Object.assign(Object.assign({},this.state),{errMessage:void 0}),{isSetEvents:!1}),G({href:"/",componentInfo:{Component:z}})}}})}}setEvents(){}createPostDataStrings(t){var e;const s=[];if(!t)return{textInfoStrings:"",contents:"내용 없음"};const n=Object.keys(t);for(let e=0;e<n.length;e++){if("contents"===n[e])continue;const a=N[n[e]];let i=t[n[e]];"createdDate"===n[e]&&(i=i.toLocaleString()),s.push(`<li><span class="name">${a}</span><span>${null!=i?i:""}</span></li>`)}return{textInfoStrings:s.join(""),contents:null!==(e=t.contents)&&void 0!==e?e:"내용 없음"}}setPostData(t){return e=this,n=void 0,i=function*(){try{const e={method:"GET",id:t},n=yield c({type:"getPost",options:e});if(!n||!n.data)throw new s({name:"DetailPage, GET CONTENT",msgType:"RESPONSE_IS_NULL"});const{message:a,statusCode:i,data:o}=n;if(!(i>=200&&i<400))throw new s({name:"DetailPage, GET CONTENT",customMessage:a});o.createdDate&&(o.createdDate=new Date(o.createdDate)),this.setState(Object.assign(Object.assign({},this.state),{currData:o}))}catch(t){const{message:e}=t;console.error(t),this.setState(Object.assign(Object.assign({},this.state),{errMessage:e}),{isSetEvents:!1})}},new((a=void 0)||(a=Promise))((function(t,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function r(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof a?s:new a((function(t){t(s)}))).then(o,r)}c((i=i.apply(e,n||[])).next())}));var e,n,a,i}};var M=function(t,e,s,n){return new(s||(s=Promise))((function(a,i){function o(t){try{c(n.next(t))}catch(t){i(t)}}function r(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}c((n=n.apply(t,e||[])).next())}))};const B=class extends C{setTemplate(){const{componentId:t}=this;return`<div class="edit__page--bottombar" data-component-id=${t}></div>`}setChildren(){const t={isButton:!0,routerInfo:V(),publisherList:[h,b]};new x(".edit__page--bottombar",{name:"goback",text:"뒤로"});const e=Object.assign(Object.assign({},t),{href:"/detail",name:"submitlink",text:"전송",callbackOption:{func:()=>M(this,void 0,void 0,(function*(){return yield this.regsiterEditData()})),runPosition:"beforePushState",options:{isID:!0}}});if(new X(".edit__page--bottombar",e),this.state&&this.state.errMessage){const{errMessage:t}=this.state;new U(".edit__page--bottombar",{noticeText:t,buttonTexts:{confirm:"목록으로"},clickHandler:{handleConfirmClick:()=>{this.setState(Object.assign(Object.assign({},this.state),{errMessage:void 0}),{isSetEvents:!1}),G({href:"/",componentInfo:{Component:z}})}}})}}setEvents(){this.registerEditBottomBarClick()}registerEditBottomBarClick(){var t;null===(t=this.getEventTarget())||void 0===t||t.addEventListener("click",(t=>this.handleEditBottomBarClick(t)))}handleEditBottomBarClick(t){const e=t.target;e.classList.contains("app-button")&&e instanceof HTMLButtonElement&&"goback"===e.name&&window.history.back()}regsiterEditData(){return M(this,void 0,void 0,(function*(){const{editData:t}=b.state,e=Object.keys(t).reduce(((e,s)=>(t[s]&&e++,e)),0);if(!(e>=k.length))return-1;const s=e>k.length;return yield this.requestCreateData(t,s)}))}requestCreateData(t,e){return M(this,void 0,void 0,(function*(){try{const n=e?"edit":"write",a={method:e?"PUT":"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},i=yield c({type:n,options:a});if(!i||!i.data){const t=`서버에 오류가 있습니다. 글을 ${"edit"===n?"수정":"작성"}할 수 없습니다.`;throw new s({name:`EditPage, ${n.toUpperCase()}`,customMessage:t})}const{message:o,statusCode:r,data:l}=i;if(!(r>=200&&r<400))throw new s({name:`EditPage, ${n.toUpperCase()}`,customMessage:o});return b.setState(Object.assign(Object.assign({},b.state),{editData:f.editData,isEdited:!0})),l>0?l:-1}catch(t){const{message:e}=t;return console.error(t),this.setState(Object.assign(Object.assign({},this.state),{errMessage:e}),{isSetEvents:!1}),-1}}))}},K=class extends C{setTemplate(){const{componentId:t}=this;return`\n    <div class="edit__page--content" data-component-id=${t}>\n      <ul class="editinfo">${this.createEditInfoStrings()}</ul>\n      <div class="editbox"></div>\n    </div>`}setChildren(){var t;const{editData:e}=this.props;["subject","author"].forEach(((t,s)=>{if(!e)return;let n=e[t];"string"!=typeof n&&(n=""),new w(`ul.editinfo li[data-key="${s}"]`,{name:t,type:"text",value:n,placeholder:N[t]})})),new I(".editbox",{name:"contents",value:e&&(null!==(t=e.contents)&&void 0!==t?t:""),isFullSize:!0,placeholder:"하고싶은 말은..?"})}setEvents(){this.registerEditContentsKeyup()}createEditInfoStrings(){return["subject","author"].reduce(((t,e,s)=>{const n=`<li data-key=${s}><span class="name">${N[e]}</span></li>`;return t.push(n),t}),[]).join("")}registerEditContentsKeyup(){var t;null===(t=this.getEventTarget())||void 0===t||t.addEventListener("keyup",(t=>this.handleEditContentsKeyup(t)))}handleEditContentsKeyup(t){const e=t.target,s="TEXTAREA"===e.nodeName&&e.classList.contains("app-textarea");if("INPUT"===e.nodeName&&e.classList.contains("app-input")||s)if(s){const t=e.value,{state:s}=b;b.setState(Object.assign(Object.assign({},s),{editData:Object.assign(Object.assign({},s.editData),{contents:t})}))}else{const t=e.name,s=e.value,{state:n}=b;b.setState(Object.assign(Object.assign({},n),{editData:Object.assign(Object.assign({},n.editData),{[t]:s})}))}}};const R=class extends C{setTemplate(){const{componentId:t}=this;return`\n    <div class="main__page--topbar" data-component-id=${t}>\n      <div class="topbar--box"></div>\n      <div class="topbar--box"></div>\n    </div>`}setChildren(){const t=V(),{numPostList:e,filterOptions:s}=h.state,{searchWord:n,numPost:a}=s,i=t=>`.main__page--topbar .topbar--box:nth-child(${t})`;new x(i(1),{name:"refrash",text:"새로고침"}),new x(i(1),{name:"init",text:"초기화"}),new X(i(1),{href:"/write",text:"작성",routerInfo:t,isButton:!0,publisherList:[h,b],callbackOption:{func:()=>b.setState(Object.assign({},f)),runPosition:"beforePushState"}}),new w(i(2),{name:"search_input",type:"text",placeholder:"검색어를 입력해주세요.",value:n}),new T(i(2),{numPostList:e,selectedValue:a})}setEvents(){this.registerMainTopBarClick(),this.registerMainTopBarKeyUp(),this.registerMainTopBarChange()}registerMainTopBarClick(){var t;null===(t=this.getEventTarget())||void 0===t||t.addEventListener("click",(t=>this.handleMainTopBarClick(t)))}handleMainTopBarClick(t){const e=t.target;if(e.closest(".topbar--box")&&e.classList.contains("app-button")&&e instanceof HTMLButtonElement){const t=e.name;"init"===t?this.initMainTopBarElements():"refrash"===t&&this.refrashPostData()}}initMainTopBarElements(){var t,e;const s=null===(t=this.getEventTarget())||void 0===t?void 0:t.querySelector('.topbar--box:nth-child(2) input[name="search_input"]');s&&(s.value="");const{filterOptions:n}=d,a=null===(e=this.getEventTarget())||void 0===e?void 0:e.querySelector(".topbar--box:nth-child(2) .app-selectbox");a&&(a.value=`${n.numPost}`),h.setState(Object.assign(Object.assign({},d),{isInit:!0}))}refrashPostData(){return t=this,e=void 0,n=function*(){try{const{data:t}=yield l();if(!t)return;d.postData=t,h.setState(Object.assign(Object.assign({},h.state),{postData:[...t],isRefresh:!0}))}catch(t){console.error(t)}},new((s=void 0)||(s=Promise))((function(a,i){function o(t){try{c(n.next(t))}catch(t){i(t)}}function r(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,r)}c((n=n.apply(t,e||[])).next())}));var t,e,s,n}registerMainTopBarKeyUp(){var t;null===(t=this.getEventTarget())||void 0===t||t.addEventListener("keyup",(t=>this.handleMainTopBarKeyUp(t)))}handleMainTopBarKeyUp(t){const e=t.target;if("search_input"!==e.name||"INPUT"!==e.nodeName)return;const s=e.value,{filterOptions:n}=h.state,a=Object.assign(Object.assign({},n),{searchWord:s});h.setState(Object.assign(Object.assign({},h.state),{filterOptions:a}))}registerMainTopBarChange(){var t;null===(t=this.getEventTarget())||void 0===t||t.addEventListener("change",(t=>this.handleMainTopBarChange(t)))}handleMainTopBarChange(t){const e=t.target;if(!e)return;if("SELECT"!==e.nodeName||!e.classList.contains("app-selectbox"))return;const s=+e.value;if(Number.isNaN(s))return;const{filterOptions:n}=h.state;h.setState(Object.assign(Object.assign({},h.state),{filterOptions:Object.assign(Object.assign({},n),{numPost:s})}))}};const A=class extends C{init(){this.initGetAllPostData(),this.setState(Object.assign(Object.assign({},this.state),{isUpdate:!1}),{noRender:!0})}initSubscriber(){this.registerSubscriberFunction(h,(()=>{const{currKeys:t}=h.recentChangedKeys;if(t.includes("isInit"))return this.execInitMainPageBoard();(t.includes("filterOptions")||t.includes("postData")||t.includes("isRefresh"))&&this.execUpdateMainPageBoard(t.includes("isRefresh"))}))}setBeforeRender(){this.state&&this.state.isUpdate&&this.setState(Object.assign(Object.assign({},this.state),{isUpdate:!1}),{noRender:!0})}setTemplate(){const{componentId:t}=this;return`<div class="main__page--board" data-component-id=${t}></div>`}setChildren(){const{filterOptions:t,postData:e}=h.state,{pageNum:s,numPost:n}=t,a=p({filterOptions:t,postData:e});new _(".main__page--board",{arrPostData:a});const i=p({filterOptions:t,postData:e,isFullData:!0}),o=Math.ceil(i.length/n);if(new $(".main__page--board",{pageNum:s,max:o}),this.state&&this.state.errMessage){const{errMessage:t}=this.state;new U(".main__page--board",{noticeText:t,showButtons:"CANCEL",buttonTexts:{cancel:"닫기"},clickHandler:{handleCancelClick:()=>{this.setState(Object.assign(Object.assign({},this.state),{errMessage:void 0}),{isSetEvents:!1})}}})}}setEvents(){this.registerMainBoardClick()}initGetAllPostData(){return t=this,e=void 0,a=function*(){try{const t="서버에 데이터가 없거나 오류가 있습니다. 게시글 작성을 시도해주세요.",e=yield l(t);if(!e||!e.data||!e.data&&e.message)throw new s({name:"MainPage, GET ALL POST",customMessage:t});d.postData=e.data;const{isEdited:n}=b.state;h.setState(Object.assign(Object.assign({},h.state),{postData:[...e.data]}),{notExec:!!n||void 0}),n&&b.setState(Object.assign(Object.assign({},b.state),{isEdited:!1}),{notExec:!0})}catch(t){const{message:e}=t;console.error(t),this.setState(Object.assign(Object.assign({},this.state),{errMessage:e}),{isSetEvents:!1})}},new((n=void 0)||(n=Promise))((function(s,i){function o(t){try{c(a.next(t))}catch(t){i(t)}}function r(t){try{c(a.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,r)}c((a=a.apply(t,e||[])).next())}));var t,e,n,a}registerMainBoardClick(){var t;null===(t=this.getEventTarget())||void 0===t||t.addEventListener("click",(t=>this.handleMainBoardClick(t)))}handleMainBoardClick(t){const e=t.target;if("A"===e.nodeName&&e.classList.contains("app-link"))return;const s=e.closest(".app-board"),n=e.closest(".app-pagination");if(s||n)if(s){if(!e.closest("tr"))return;const t="TH"===e.nodeName&&e.classList.contains("createdDate"),s="TD"===e.nodeName&&e.classList.contains("author")&&e.textContent;if(t)return this.execCreatedDateClick();if(s&&e.textContent)return this.execAuthorClick(e.textContent)}else if("LI"===e.nodeName)return this.execPaginationItemClick(e)}execCreatedDateClick(){const{filterOptions:t}=h.state,e=!t.isDesc,s=Object.assign(Object.assign({},t),{isDesc:e});h.setState(Object.assign(Object.assign({},h.state),{filterOptions:s})),this.setState(Object.assign(Object.assign({},this.state),{isUpdate:!0}),{isSetEvents:!1})}execAuthorClick(t){const{filterOptions:e}=h.state,s=Object.assign(Object.assign({},e),{author:t});h.setState(Object.assign(Object.assign({},h.state),{filterOptions:s})),this.setState(Object.assign(Object.assign({},this.state),{isUpdate:!0}),{isSetEvents:!1})}execPaginationItemClick(t){const e=t.classList.contains("prev")||t.classList.contains("next"),{filterOptions:s,postData:n}=h.state;let a=-1;if(e){if(!this.state||t.classList.contains("disabled"))return;const{pageNum:e,numPost:i}=s,o=Math.ceil(n.length/i);a=t.classList.contains("prev")?e-5:e+5,a>o?a=o:a<=0&&(a=1)}else{const e=+`${t.textContent}`;if(Number.isNaN(e))return;a=e}const i=Object.assign(Object.assign({},s),{pageNum:a});h.setState(Object.assign(Object.assign({},h.state),{filterOptions:i}),{notExec:!0}),this.setState(Object.assign(Object.assign({},this.state),{isUpdate:!0}),{isSetEvents:!1})}execInitMainPageBoard(){h.setState(Object.assign(Object.assign(Object.assign({},h.state),d),{isInit:!1}),{notExec:!0}),this.setState(Object.assign(Object.assign({},this.state),{isUpdate:!0}),{isSetEvents:!1})}execUpdateMainPageBoard(t){return t&&h.setState(Object.assign(Object.assign({},h.state),{isRefresh:!1}),{notExec:!0}),this.setState(Object.assign(Object.assign({},this.state),{isUpdate:!0}),{isSetEvents:!1})}},U=class extends C{constructor(t,e){super(t,e),this.$target=t,this.props=e}init(){this.props.showButtons||(this.props.showButtons="CONFIRM")}setTemplate(){const{componentId:t}=this;return`\n    <div class="app-error-modal" data-component-id=${t}>\n      <div class="inner">\n        <div class="buttons"></div>\n      </div>\n    </div>`}setChildren(){var t,e;const{noticeText:s,showButtons:n,buttonTexts:a}=this.props;new D(".app-error-modal .inner",{text:s,fontSize:16,initInsertPosition:"afterbegin"});const i=".app-error-modal .inner .buttons";"ALL"!==n&&"CANCEL"!==n||new x(i,{text:null!==(t=null==a?void 0:a.cancel)&&void 0!==t?t:"취소",name:"cancel",color:"red",size:"small"}),"ALL"!==n&&"CONFIRM"!==n||new x(i,{text:null!==(e=null==a?void 0:a.confirm)&&void 0!==e?e:"확인",name:"confirm",color:"blue",size:"small"})}setEvents(){this.registerButtonsClick()}registerButtonsClick(){var t;null===(t=this.getEventTarget())||void 0===t||t.addEventListener("click",(t=>this.handleButtonsClick(t)))}handleButtonsClick(t){const e=t.target;if(!e.closest(".buttons"))return;if("BUTTON"!==e.nodeName)return;const s=e.name,{clickHandler:{handleConfirmClick:n,handleCancelClick:a}}=this.props;"confirm"===s&&n?n():"cancel"===s&&a&&a()}},F=class extends C{init(){var t,e;const{search:s}=new URL(window.location.href),n=null===(e=null===(t=W(s))||void 0===t?void 0:t.find((t=>"id"===t.key)))||void 0===e?void 0:e.value;n?this.setState(Object.assign(Object.assign({},this.state),{dataId:n}),{noRender:!0}):G()}setTemplate(){const{componentId:t}=this;return`<div class="detail__page default-page-size" data-component-id=${t}></div>`}setChildren(){var t;const e=null===(t=this.state)||void 0===t?void 0:t.dataId;new P(".detail__page",{dataId:e}),new L(".detail__page",{dataId:e})}},H=class extends C{initSubscriber(){this.registerSubscriberFunction(h,(()=>{const{currKeys:t}=h.recentChangedKeys;t.includes("editId")&&this.registerEditData()}))}setTemplate(){const{componentId:t}=this;return`<div class="edit__page default-page-size" data-component-id=${t}></div>`}setChildren(){const{editData:t}=b.state;new K(".edit__page",{editData:t}),new B(".edit__page")}registerEditData(){const{editId:t,postData:e}=h.state;if(-1===t)return;const s=e.find((({id:e})=>t===e));s&&(b.setState(Object.assign(Object.assign({},b.state),{editData:s})),h.setState(Object.assign(Object.assign({},h.state),{editId:d.editId}),{notExec:!0}),this.setState(Object.assign(Object.assign({},this.state),{editData:s}),{isSetEvents:!1}))}},z=class extends C{setTemplate(){const{componentId:t}=this;return`<div class="main__page default-page-size" data-component-id=${t}></div>`}setChildren(){new R(".main__page"),new A(".main__page")}},q=class extends C{setTemplate(){const{componentId:t}=this;return`<div class="not-found__page default-page-size" data-component-id=${t}></div>`}setChildren(){new D(".not-found__page",{text:"페이지를 찾을 수 없습니다.",fontSize:36,isBold:!0});const t=V();new X(".not-found__page",{text:"메인으로",isButton:!0,href:"/",routerInfo:t})}};function G({href:t,publisherList:e,componentInfo:s}={}){t||(t=new URL(window.location.href).origin+"/notFound"),window.history.pushState({href:t},"",t);const n=document.querySelector("#root"),a=null!=s?s:{$target:n,Component:q};a.$target||(a.$target=n);let{$target:i,Component:o,props:r}=a;"string"==typeof i&&(i=document.querySelector(i)),i&&(i.innerHTML="",e&&e.forEach((t=>t.clear())),new o(i,r))}function J({href:t,routerInfo:e,calledComponentName:n,publisherList:a}){var i;try{if(!e)throw new s({msgType:"NOT_FOUND_ROUTER_INFO",name:n});const{pathname:o}=new URL(t),r=null!==(i=e[o])&&void 0!==i?i:e["/notFound"],{Component:c,props:l}=r;let d=r.$target;if("string"==typeof d&&(d=document.querySelector(d)),!d)return;d.innerHTML="",a&&a.forEach((t=>t.clear())),new c(d,l)}catch(t){console.error(t)}}function V(t=document.querySelector("#root")){return{"/":{$target:t,Component:z},"/detail":{$target:t,Component:F},"/edit":{$target:t,Component:H},"/write":{$target:t,Component:H},"/notFound":{$target:t,Component:q}}}const W=t=>{var e;try{const s=/(?<key>[\w]+)=(?<value>[\w]+)/g,n=null!==(e=Array.from(t.matchAll(s)))&&void 0!==e?e:[];return n&&n.length?n.map((t=>t.groups)):null}catch(t){return null}};const X=class extends C{constructor(t,e){super(t,e),this.$target=t,this.props=e}setTemplate(){if(!this.props)return"";const{componentId:t,props:e}=this,{text:s,isButton:n}=e;return`<a class="app-link ${n?" btn":""}" ${this.createStringAttribute("routerInfo","publisherList","isButton","callbackOption","text")} data-component-id=${t}>${null!=s?s:""}</a>`}setEvents(){this.registerAnchorClick()}registerAnchorClick(){var t;null===(t=this.getEventTarget())||void 0===t||t.addEventListener("click",(t=>this.anchorClickHandler(t)))}anchorClickHandler(t){var e,s,n,a,i;return s=this,n=void 0,i=function*(){null==t||t.preventDefault();const s=null==t?void 0:t.target,n=null==t?void 0:t.currentTarget;if(!n||s!==n)return;let a=n.href;if(!a)return;const{callbackOption:i}=this.props;if((null==i?void 0:i.func)&&"beforePushState"===i.runPosition){const t=yield i.func();if("boolean"==typeof t&&!t)return;if(null===(e=i.options)||void 0===e?void 0:e.isID){if("number"==typeof t&&-1===t)return;a+=`?id=${t}`}}window.history.pushState({href:a},"",a);const{routerInfo:o,publisherList:r}=this.props;J({href:a,calledComponentName:`${this.constructor.name}(${this.componentId})`,routerInfo:o,publisherList:r}),(null==i?void 0:i.func)&&"afterRenderPath"===i.runPosition&&i.func()},new((a=void 0)||(a=Promise))((function(t,e){function o(t){try{c(i.next(t))}catch(t){e(t)}}function r(t){try{c(i.throw(t))}catch(t){e(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof a?s:new a((function(t){t(s)}))).then(o,r)}c((i=i.apply(s,n||[])).next())}))}};new class extends C{constructor(t){super(t)}init(){this.$target&&"string"!=typeof this.$target&&new class{constructor(t,e,n=[]){this.$target=t,this.routerInfo=e,this.publisherList=n;try{if(null===t)throw new s({msgType:"NOT_FOUND_TARGET",name:this.constructor.name});this.init()}catch(t){console.error(t)}}init(){this.setPopStateEvent();const t=window.location.href,{routerInfo:e,publisherList:s}=this;J({href:t,calledComponentName:this.constructor.name,routerInfo:e,publisherList:s})}setPopStateEvent(){window.addEventListener("popstate",(()=>this.popStateEventHandler()))}popStateEventHandler(t){const e=window.location.href,{routerInfo:s,publisherList:n}=this;J({href:e,calledComponentName:this.constructor.name,routerInfo:s,publisherList:n})}}(this.$target,V(),[h,b])}}("#root")})();